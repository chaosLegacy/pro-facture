<div class="hbox hbox-auto-xs hbox-auto-sm" ng-controller="SettingsCtrl">
    <div class="col">
        <div>
            <div class="wrapper-lg bg-black-opacity">
                <div class="row m-t">
                    <div class="col-sm-7">
                        <a href class="thumb-lg pull-left m-r">
                            <img src="{{societe.logo}}" class="img-responsive">
                        </a>
                        <div class="clear m-b">
                            <div class="m-b m-t-sm">
                                <span class="h3 text-white">{{app.user.userName}}</span><br />
                                <span class="h5 text-white">{{app.user.mission}}</span><br /><br />
                                <small class="text-white">{{societe.adresse}}</small>
                            </div>

                        </div>
                    </div>
                    <div class="col-sm-5">
                        <div class="pull-right pull-none-xs text-center">
                            <a href class="m-b-md inline m">
                                <small class="text-left text-white">Capitale</small>
                                <span class="h3 block font-bold text-white">{{societe.capitale}} {{currency}}</span>

                            </a>
                            <a href class="m-b-md inline m">
                                <small class="text-left text-white">Membre d'équipe</small>
                                <span class="h3 block font-bold text-white">{{ListeSubusers.length}}</span>

                            </a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- toaster directive -->
        <toaster-container toaster-options="{'position-class': 'toast-top-right', 'close-button':true}">
        </toaster-container>
        <!-- / toaster directive -->
        <div class="wrapper bg-white b-b">

            <tabset justified="true" class="tab-container profile">

                <tab>
                    <tab-heading>
                        <i class="glyphicon glyphicon-briefcase"></i>&nbsp; Ma société
                    </tab-heading>

                    <div class="content">
                        <h4><i class="fa fa-key"></i>&nbsp; Identifiez-vous<small>&nbsp; ces informations seront présent
                                dans vos commandes, factures,...</small></h4>
                        <hr />
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="nomP">Nom de la société</label>
                                    <input type="text" class="form-control" id="nomP" placeholder="Ma société"
                                        ng-model="societe.nomSoc" ng-readonly="true">
                                </div>



                            </div>
                            <div class="col-sm-6">



                                <div class="form-group">
                                    <label for="telephoneP">Téléphone</label>
                                    <input type="text" class="form-control" id="telephoneP" placeholder="0811 044 044"
                                        maxlength="10" numbers-only ng-model="societe.tel">
                                </div>
                                <div class="form-group">
                                    <label for="faxP">Fax</label>
                                    <input type="text" class="form-control" id="faxP" placeholder="0811 044 044"
                                        maxlength="10" numbers-only ng-model="societe.fax">
                                </div>

                            </div>
                        </div>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="paysP">N° de patente</label>
                                    <input type="text" class="form-control" id="paysP" placeholder="N° de patente"
                                        ng-model="societe.patente">
                                </div>
                                <div class="form-group">
                                    <label for="villeP">Capitale</label>
                                    <input type="text" class="form-control" id="villeP" placeholder="Capital"
                                        ng-model="societe.capitale">
                                </div>



                            </div>
                            <div class="col-sm-6">

                                <div class="form-group">
                                    <label for="adresseP">Adresse</label>
                                    <textarea class="form-control textarea" id="adresseP" placeholder="Mon adresse"
                                        ng-model="societe.adresse" rows='5'></textarea>
                                </div>
                            </div>
                        </div>

                        <hr>
                        <div class="row">
                            <div class="col-sm-6"></div>
                            <div class="col-sm-6">
                                <div class="pull-right">
                                    <button class="btn btn-sm btn-dark btn-addon" ng-click="updateSociete(societe)"><i
                                            class="fa fa-refresh"></i>Mette à jour</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </tab>

                <tab>
                    <tab-heading>
                        <i class="glyphicon glyphicon-list"></i>&nbsp; Mes coordonnées
                    </tab-heading>

                    <div class="content">
                        <h4><i class="fa fa-key"></i>&nbsp; Identifiez-vous<small>&nbsp; ces informations seront présent
                                dans vos commandes, factures,...</small></h4>
                        <hr />
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="m-t" data-ng-show="authError">
                                    <div class="alert alert-danger">
                                        <p data-ng-bind-html="authError"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6"></div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="profilP">Photo de profil</label>
                                    <input type="file" class="form-control" id="profilP" ng-model="user.photo" required>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="nomP">Nom</label>
                                    <input type="text" class="form-control" id="nomP" placeholder="Mon nom"
                                        ng-model="user.nom">
                                </div>

                                <div class="form-group">
                                    <label for="telephoneP">Téléphone</label>
                                    <input type="text" class="form-control" id="telephoneP" placeholder="0811 044 044"
                                        maxlength="10" numbers-only ng-model="user.tel">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="prenomP">Prénom</label>
                                    <input type="text" class="form-control" id="prenomP" placeholder="Mon prénom"
                                        ng-model="user.prenom">
                                </div>

                                <div class="form-group">
                                    <label for="missionP">Fonction</label>
                                    <input type="text" class="form-control" id="missionP" placeholder="Ma mission"
                                        ng-model="user.mission">
                                </div>
                            </div>
                        </div>

                        <hr>
                        <div class="row">
                            <div class="col-sm-6"></div>
                            <div class="col-sm-6">
                                <div class="pull-right">
                                    <button class="btn btn-sm btn-dark btn-addon" ng-click="updateUser(user)"><i
                                            class="fa fa-refresh"></i>Mette à jour</button>
                                </div>
                            </div>
                        </div>
                    </div>

                </tab>
                <tab ng-if="app.user.typeAbonnement === app.abonnements.premiumType && user.isAdmin">
                    <tab-heading>
                        <i class="fa fa-users"></i>&nbsp; Mon équipes
                    </tab-heading>

                    <div class="content">
                        <h4><i class="glyphicon glyphicon-pencil"></i>&nbsp; Gestion d'équipe<small>&nbsp; gérer les
                                permissions de chaque utilisateur de l'application</small></h4>
                        <nav class="m-t-n-lg pull-right">
                            <button class="btn btn-sm btn-dark btn-addon" ng-click="editionUser()"><i
                                    class="glyphicon glyphicon-plus"></i>Ajouter un utilisateur</button>
                        </nav>
                        <hr />
                        <div class="row">
                            <div class="col-sm-12">
                                <table class="table m-b-none" data-ui-jq="footable" data-page-size="5"
                                    ng-show="getStats(commande.status) !== ''">
                                    <thead>
                                        <tr>
                                            <th data-hide="phone">
                                                Nom complet
                                            </th>
                                            <th data-hide="phone">
                                                E-mail
                                            </th>
                                            <th data-hide="phone">
                                                Téléphone
                                            </th>
                                            <th data-hide="phone">
                                                Statue
                                            </th>
                                            <th data-hide="phone">
                                                Permissions
                                            </th>
                                            <th data-hide="phone">
                                                Actions
                                            </th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="subuser in ListeSubusers">
                                            <td>
                                                <h5>{{subuser.nom}} {{subuser.prenom}}</h5>
                                            </td>
                                            <td><b>{{subuser.login}}</b></td>
                                            <td>{{subuser.tel}}</td>
                                            <td>
                                                <span class="label"
                                                    ng-class="{'bg-danger':subuser.active===0, 'bg-success':subuser.active===1, 'bg-warning':subuser.active===2}">{{userEtat(subuser.active)
                                                    }}</span>
                                            </td>
                                            <td>contenu non disponible</td>
                                            <td>
                                                <button class="btn btn-xs btn-danger"
                                                    ng-click="removeUser(subuser.idUser)"><i
                                                        class="glyphicon glyphicon-trash"></i></button>
                                                <button class="btn btn-xs btn-info" ng-click="editionUser(subuser)"><i
                                                        class="glyphicon glyphicon-pencil"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Modals Start-->
                            <script type="text/ng-template" id="editSubUser.tpl.html">
                                <div class="modal-header">
                                <button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h2 ng-if="subuser.oper == 1">Nouveau utilisateur</h2>
                                <h2 ng-if="subuser.oper == 2">Utilisateur {{" - "+subuser.nom}} {{subuser.prenom}}</h2>
                                </div>
                                <div class="modal-body">
                                <div class="col-sm-12">
                                <div class="row">
                                
                                <div class="col-sm-6 col-xs-6">
                                <div class="form-group">
                                <img src="{{subuser.photo}}" style="max-width:100px"/>
                                </div>
                                    <div class="row">
                                    <div class="col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label for="nomU">Nom</label>
                                            <input type="text" class="form-control" id="nomU" placeholder="Saisir le nom de l'utilsateur"  maxlength="30" ng-model="subuser.nom" ng-change="subuser.login = subuser.nom">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="emailU">E-mail </label>
                                            <div class="input-group" ng-if="subuser.oper === 1">
                                                <input type="text" class="form-control" id="emailU" placeholder="" maxlength="30" ng-model="subuser.login">
                                                <span class="input-group-addon">@{{subuser.societeEmail}}</span>
                                            </div>
                                            <input type="text" class="form-control" id="emailU" placeholder="" maxlength="30" ng-model="subuser.login" ng-disabled="true" ng-if="subuser.oper === 2">
                                        </div>
                                
                                        <div class="form-group" ng-if="subuser.oper === 1">
                                            <label for="passwordU">Mot de passe </label>
                                            <input type="password" class="form-control" id="passwordU" placeholder="Saisir le mot de passe de l'utilsateur"  ng-model="subuser.password">
                                        </div>
                                    </div>

                                    <div class="col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label for="prenomU">Prenom</label>
                                            <input type="text" class="form-control" id="prenomU" placeholder="Saisir le prenom de l'utilsateur"  maxlength="30" ng-model="subuser.prenom">
                                        </div>
                                
                                         <div class="form-group">
                                            <label for="tellU">Téléphone </label>
                                            <input type="tel" class="form-control" id="tellU" placeholder="Saisir le téléphone de l'utilsateur"  maxlength="10" ng-model="subuser.tel">
                                        </div>
                                
                                        <div class="form-group" ng-if="subuser.oper === 1">
                                            <label for="passwordU">Confirmation de mot de passe </label>
                                            <input type="password" class="form-control" id="passwordU" placeholder="Saisir le mot de passe de l'utilsateur"  ng-model="subuser.confPassword">
                                        </div>
                                
                                        <div class="form-group">
                                            <label for="missionU">Mission </label>
                                            <input type="tel" class="form-control" id="missionU" placeholder="Saisir la fonction de l'utilsateur"  maxlength="100" ng-model="subuser.mission">
                                        </div>
                                    </div>
                                    </div>
                                </div>
                        
                                <div class="col-sm-6 col-xs-6">
                                <div class="form-group">
                                <h3>Liste des permissions </h3>
                                    <div ng-repeat="permission in subuser.listePermission">
                                        <div class="checkbox">
                                            <label>
                                              <input type="checkbox" value="" ng-model="permission.value">
                                              {{permission.label}}
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                </div>
                                </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="modal-footer">            
                                <button class="btn btn-default" ng-click="cancel()"><i class="fa fa-reply"></i> Annuler</button>
                                <button class="btn btn-dark" ng-click="editUser(subuser)" ng-if="subuser.oper === 1">Valider <i class="fa fa-check"></i></button>
                                <button class="btn btn-dark" ng-click="editUser(subuser)" ng-if="subuser.oper === 2">Éditer <i class="fa fa-pencil"></i></button>
                                </div>
                            </script>
                            <!-- Modals End-->

                        </div>
                    </div>
                </tab>

                <tab>
                    <tab-heading>
                        <i class="fa fa-cogs"></i>&nbsp; Paramètres
                    </tab-heading>

                    <div class="content">
                        <h4><i class="fa fa-cog"></i>&nbsp; Paramétrages générale<small>&nbsp; changez le fonctionnement
                                de l'application</small></h4>
                        <hr />

                        <accordion close-others="oneAtATime">
                            <accordion-group is-open="status1.open" is-disabled="false">
                                <accordion-heading>
                                    <i class="glyphicon glyphicon-leaf"></i>&nbsp; Thème <i
                                        class="pull-right fa fa-angle-right"
                                        ng-class="{'fa-angle-down':status1.open, 'fa-angle-right': !status1.open}"></i>
                                </accordion-heading>

                                <div class="page-header">
                                    <h4><i class="glyphicon glyphicon-tint"></i>&nbsp; Personnalisation
                                        d'application<small>&nbsp; changez votre thème</small></h4>
                                </div>

                                <div data-ng-include=" 'tpl/blocks/settings.html'" class="settings panel panel-default">
                                </div>
                            </accordion-group>

                            <accordion-group is-open="status2.open">
                                <accordion-heading>
                                    <i class="glyphicon glyphicon-lock"></i>&nbsp; Réinstaller mon mot de passe <i
                                        class="pull-right fa fa-angle-right"
                                        ng-class="{'fa-angle-down': status2.open, 'fa-angle-right': !status2.open}"></i>
                                </accordion-heading>
                                <div class="page-header">
                                    <h4><i class="glyphicon glyphicon-lock"></i>&nbsp; Réinstaller votre mot de
                                        passe<small>&nbsp; changez votre mot de passe</small></h4>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="m-t" data-ng-show="authError">
                                            <div class="alert alert-danger">
                                                <p data-ng-bind-html="authError"></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="emailP">Mon ancien mot de passe</label>
                                            <input type="password" class="form-control" id="emailP" placeholder="******"
                                                ng-model="user.password">
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="emailP">Mon nouveau mot de passe</label>
                                            <input type="password" class="form-control" id="emailP" placeholder="******"
                                                ng-model="user.nvPassword">
                                        </div>
                                        <div class="form-group">
                                            <label for="emailP">Confirmer mon nouveau mot de passe</label>
                                            <input type="password" class="form-control" id="emailP" placeholder="******"
                                                ng-model="user.confPassword">
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="m-t" data-ng-show="authSuccess">
                                            <div class="alert alert-success">
                                                <p data-ng-bind-html="authSuccess"></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-6"></div>
                                    <div class="col-sm-6">
                                        <div class="pull-right">
                                            <button class="btn btn-sm btn-dark btn-addon"
                                                ng-click="updateUserMdp(user)"><i class="fa fa-refresh"></i>Mette à
                                                jour</button>
                                        </div>
                                    </div>
                                </div>
                            </accordion-group>

                            <accordion-group is-open="status3.open">
                                <accordion-heading>
                                    <i class="glyphicon glyphicon-tint"></i>&nbsp;Paramétrage PDF <i
                                        class="pull-right fa fa-angle-right"
                                        ng-class="{'fa-angle-down':status3.open, 'fa-angle-right': !status3.open}"></i>
                                </accordion-heading>
                                <div class="page-header">
                                    <h4><i class="glyphicon glyphicon-tint"></i>&nbsp; Personnalisation PDF<small>&nbsp;
                                            changez l'affichage de vos PDF</small></h4>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="logoS">Logo de ma société</label>
                                            <input type="file" class="form-control" id="logoS" ng-model="societe.logo">
                                        </div>

                                        <div class="form-group colorPicker">
                                            <label>Couleur de texte</label>
                                            <div class="input-group">
                                                <input type="color" class="form-control input-color input-sm"
                                                    id="colorPk1" ng-model="paramPdf.textcolor">
                                                <label class="input-group-addon input-sm" for="colorPk1"><i
                                                        class="glyphicon glyphicon-leaf"></i></label>
                                            </div>
                                        </div>

                                        <div class="form-group colorPicker">
                                            <label>Couleur de table de contenu</label>
                                            <div class="input-group">
                                                <input type="color" class="form-control input-color input-sm"
                                                    id="colorPk2" ng-model="paramPdf.tablecolor">
                                                <label class="input-group-addon input-sm" for="colorPk2"><i
                                                        class="glyphicon glyphicon-leaf"></i></label>
                                            </div>
                                        </div>

                                        <div class="form-group colorPicker">
                                            <label>Couleur d'arrière plan de document</label>
                                            <div class="input-group">
                                                <input type="color" class="form-control input-color input-sm"
                                                    id="colorPk3" ng-model="paramPdf.backcolor">
                                                <label class="input-group-addon input-sm" for="colorPk3"><i
                                                        class="glyphicon glyphicon-leaf"></i></label>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-sm-6">
                                        <img src='{{societe.logo}}' alt='{{societe.nomSoc}}'
                                            class="img-responsive img-block" />
                                    </div>
                                </div>

                                <hr>
                                <div class="row">
                                    <div class="col-sm-6"></div>
                                    <div class="col-sm-6">
                                        <div class="pull-right">
                                            <button class="btn btn-sm btn-dark btn-addon"
                                                ng-click="updateParamsPdf(paramPdf)"><i class="fa fa-refresh"></i>Mette
                                                à jour</button>
                                        </div>
                                    </div>
                                </div>
                            </accordion-group>

                            <accordion-group is-open="status4.open" is-disabled="false">
                                <accordion-heading>
                                    <i class="glyphicon glyphicon-tasks"></i>&nbsp; Paramétrage TVA et devise <i
                                        class="pull-right fa fa-angle-right"
                                        ng-class="{'fa-angle-down':status4.open, 'fa-angle-right': !status4.open}"></i>
                                </accordion-heading>

                                <div class="page-header">
                                    <h4><i class="glyphicon glyphicon-tasks"></i>&nbsp; Devise et TVA par
                                        défaut<small>&nbsp; établir votre type de devise et la tva qui sera par
                                            défaut</small></h4>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="deviseP">Devise</label>
                                            <select class="form-control" id="deviseP" ng-model="genrale.idDefaultDevise"
                                                ng-options="value.idDevise as value.label for value in ListeDevise"
                                                required>
                                                <option value="" selected>--Sélectionner une devise--</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="form-group">
                                            <label for="tvaP">TVA par défaut</label>
                                            <select class="form-control" id="tvaP" ng-model="genrale.idDefaultTva"
                                                ng-options="value.idTva as value.valeur for value in ListeTva" required>
                                                <option value="" selected>--Sélectionner une valeur--</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-6"></div>
                                    <div class="col-sm-6">
                                        <div class="pull-right">
                                            <button class="btn btn-sm btn-dark btn-addon"
                                                ng-click="saveInfosGenerales(genrale)"><i
                                                    class="fa fa-refresh"></i>Mette à jour</button>
                                        </div>
                                    </div>
                                </div>

                            </accordion-group>
                        </accordion>

                    </div>
                </tab>

            </tabset>
        </div>
    </div>
    <div class="col w-lg bg-light lter b-l bg-auto">
        <div class="wrapper">
            <div class="panel b-a" ng-if="app.user.typeAbonnement === app.abonnements.premiumType">
                <h4 class="font-thin padder">Votre équipe</h4>
                <ul class="list-group" ng-repeat="subuser in ListeSubusers">
                    <li class="list-group-item" style="height: 60px">
                        <a herf class="pull-left thumb-sm avatar m-r">
                            <img src="{{subuser.photo}}" alt="{{subuser.nom+" "+subuser.prenom}}" class="img-circle">
                            <i class="b-white bottom"
                                ng-class="{'busy':subuser.active===0, 'on':subuser.active===1, 'away':subuser.active===2}"></i>
                        </a>
                        <div class="clear">
                            <div><a href>{{subuser.nom+" "+subuser.prenom}}</a></div>
                            <small class="text-muted">{{subuser.mission}}</small>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>